# Protocol-Buffers

نگارندگان: فرنام فرقانی، آرین ایروانی، کیان تراکمه

# بیان مسئله

در عصر نرم‌افزارهای مدرن، تبادل داده بین سیستم‌ها و سرویس‌ها به یک نیاز حیاتی تبدیل شده است. این داده‌ها باید ساختار مشخصی داشته باشند و مستقل از زبان برنامه‌نویسی یا پلتفرم، توسط طرف مقابل قابل استفاده باشند.  

## چالش‌های قالب‌های متنی متداول

روش‌های متداولی مانند **JSON** و **XML** اگرچه ساده و خوانا هستند، اما محدودیت‌هایی دارند که در مقیاس بزرگ نمود پیدا می‌کند:

- **حجم داده نسبتاً زیاد**: کلیدها و برچسب‌های تکراری باعث افزایش حجم فایل و ترافیک شبکه می‌شوند.
- **پردازش کندتر**: عملیات تجزیه و ساختاردهی داده متنی در مقایسه با قالب‌های دودویی زمان بیشتری می‌طلبد.
- **انعطاف‌پذیری محدود در تغییر ساختار**: کوچک‌ترین تغییر در قالب داده می‌تواند ناسازگاری بین نسخه‌های مختلف ایجاد کند.
- **مصرف بالاتر منابع**: در سناریوهای با پهنای باند محدود، ارسال و دریافت داده متنی بهینه نیست.

## اهمیت موضوع در معماری‌های بزرگ

در سیستم‌های توزیع‌شده (Distributed Systems)، سرویس‌های مایکروسرویس (Microservices) و ارتباطات بین‌زبانی (Cross-Language Communication)، این محدودیت‌ها می‌تواند منجر به مشکلات جدی مانند کاهش عملکرد، افزایش هزینه زیرساخت، و پیچیدگی مدیریت داده شود.

## نیاز به راهکاری بهینه و سازگار

برای رفع این چالش‌ها، نیاز به یک راهکار سریع‌تر، کم‌حجم‌تر، و با قابلیت سازگاری نسخه‌ای (Backward/Forward Compatibility) احساس شد.  
**Protocol Buffers** که توسط گوگل توسعه یافته است، دقیقاً با هدف حل این مشکلات طراحی شده و با استفاده از ساختارهای داده دودویی و تعریف شِما به زبان مستقل، امکان تبادل داده بهینه را بین سیستم‌های ناهمگون فراهم می‌کند.

![img.png](assets/protobuf.png)

# معرفی کلی

## معرفی
**Protocol Buffers** (که به اختصار **Protobuf** نامیده می‌شود) یک قالب سریال‌سازی داده ساختارمند و مستقل از زبان است که توسط گوگل توسعه یافته است. این فناوری ابتدا در سال ۲۰۰۱ ایجاد شد و در سال ۲۰۰۸ به صورت متن‌باز منتشر گردید. Protobuf به منظور تبادل کارآمد داده‌ها بین سیستم‌های مختلف طراحی شده و داده‌ها را به صورت دودویی (Binary) ذخیره و منتقل می‌کند که منجر به کاهش حجم و افزایش سرعت پردازش می‌شود.

## مفهوم اساسی و فرآیند کار
در Protobuf، ساختار داده‌ها ابتدا با استفاده از یک زبان توصیفی ساده در قالب فایل‌های شِما با پسوند **`.proto`** تعریف می‌شود. این فایل‌ها انواع داده‌ها و فیلدها را به همراه شماره برچسب (Tag Number) مشخص می‌کنند که نقش کلیدی در فشردگی و سرعت پردازش ایفا می‌کند. سپس این شِما توسط کامپایلر مخصوص (مانند `protoc`) به کدهای قابل استفاده در زبان‌های برنامه‌نویسی مختلف (از جمله C++، Java، Python، Go و بیش از ۲۰ زبان دیگر) تبدیل می‌شود. این فرآیند تولید کد، کلاس‌ها و توابع مورد نیاز برای عملیات سریال‌سازی (Encoding) و دسریال‌سازی (Decoding) را به صورت خودکار ایجاد می‌کند.

## مزایای کلیدی

### 1. کارایی بالا در حجم و سرعت
- داده‌ها در قالب دودویی فشرده ذخیره می‌شوند که حجم آن را تا ۱۰ برابر کمتر از فرمت‌های متنی مانند JSON و تا ۶ برابر سریع‌تر از XML می‌کند.
- این بهینه‌سازی باعث کاهش پهنای باند مصرفی و افزایش سرعت پردازش می‌شود.

### 2. سازگاری نسخه‌ای قوی (Backward/Forward Compatibility)
- امکان تغییر ساختار داده بدون شکستن سازگاری با نسخه‌های قبلی یا بعدی فراهم می‌شود.
- این ویژگی امکان توسعه تدریجی و ارتقای سیستم را بدون اختلال در عملکرد فراهم می‌کند.

### 3. استقلال از زبان و پلتفرم
- Protobuf مستقل از زبان برنامه‌نویسی و پلتفرم است و انعطاف‌پذیری بالایی در معماری‌های چندزبانه و توزیع‌شده ارائه می‌دهد.

### 4. تعریف دقیق و رسمی ساختار داده
- فایل‌های `.proto` به عنوان منبع واحدی برای تعریف داده عمل می‌کنند که وضوح و قابلیت نگهداری سیستم را افزایش می‌دهند.

## کاربردهای اصلی
- سرویس‌های وب و APIها (مانند RESTful و **gRPC** که توسط گوگل استفاده می‌شود).
- سیستم‌های مایکروسرویسی و ارتباطات بین سرویسی.
- اپلیکیشن‌های موبایل و سرویس‌های ابری.
- سیستم‌های پیام‌رسانی (Message Queuing) و ذخیره‌سازی داده در پایگاه‌های داده یا فایل.

## نتیجه‌گیری
امروزه Protobuf به عنوان یک استاندارد کارآمد و قابل اعتماد برای تبادل داده در سیستم‌های بزرگ مقیاس شناخته می‌شود و توسط شرکت‌های بزرگی مانند گوگل، Netflix و Uber به طور گسترده مورد استفاده قرار می‌گیرد.




# مثال



# مراجع

* [Google Developers — Protocol Buffers Overview](https://developers.google.com/protocol-buffers/docs/overview)
* [Google Developers — Encoding](https://developers.google.com/protocol-buffers/docs/encoding)
* [Wikipedia — Protocol Buffers](https://en.wikipedia.org/wiki/Protocol_Buffers)
